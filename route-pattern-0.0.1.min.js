(function(e){if("function"==typeof bootstrap)bootstrap("routepattern",e);else if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeRoutePattern=e}else"undefined"!=typeof window?window.RoutePattern=e():global.RoutePattern=e()})(function(){var define,ses,bootstrap,module,exports;return function(e,t,n){function r(n,i){if(!t[n]){if(!e[n]){var s=typeof require=="function"&&require;if(!i&&s)return s(n,!0);throw new Error("Cannot find module '"+n+"'")}var o=t[n]={exports:{}};e[n][0](function(t){var i=e[n][1][t];return r(i?i:t)},o,o.exports)}return t[n].exports}for(var i=0;i<n.length;i++)r(n[i]);return r}({1:[function(require,module,exports){function merge(){return[].slice.call(arguments).reduce(function(merged,source){for(var prop in source){merged[prop]=source[prop]}return merged},{})}function decodeQueryString(queryString){return queryString.split("&").reduce(function(params,pair){var parts=pair.split("="),key=decodeURIComponent(parts[0]),value=decodeURIComponent(parts[1]||"");params[key]=value;return params},{})}function splitLocation(location){var re=/([^\?#]*)?(\?[^#]*)?(#.*)?$/;var match=re.exec(location);return{path:match[1]||"",queryString:match[2]&&match[2].substring(1)||"",hash:match[3]&&match[3].substring(1)||""}}var QueryStringPattern=function(){function QueryStringPattern(options){this.params=options.params;this.allowWildcards=options.allowWildcards;this.routeString=options.routeString}QueryStringPattern.prototype.matches=function(queryString){var givenParams=(queryString||"").split("&").reduce(function(params,pair){var parts=pair.split("="),name=parts[0],value=parts[1];if(name)params[name]=value;return params},{});var requiredParam,requiredParams=[].concat(this.params);while(requiredParam=requiredParams.shift()){if(!givenParams.hasOwnProperty(requiredParam.key))return false;if(requiredParam.value&&givenParams[requiredParam.key]!=requiredParam.value)return false}if(!this.allowWildcards&&this.params.length){if(Object.getOwnPropertyNames(givenParams).length>this.params.length)return false}return true};QueryStringPattern.prototype.match=function(queryString){var data={params:[],namedParams:{},namedQueryParams:{},queryParams:{}};if(!queryString){return data}var namedParams=this.params.reduce(function(names,param){names[param.key]=param.name;return names},{});queryString.split("&").forEach(function(pair){var parts=pair.split("="),key=decodeURIComponent(parts[0]),value=decodeURIComponent(parts[1]||"");data.queryParams[key]=value;data.params.push(value);if(namedParams[key]){data.namedQueryParams[namedParams[key]]=data.namedParams[namedParams[key]]=value}});return data};QueryStringPattern.fromString=function(routeString){var options={routeString:routeString,allowWildcards:false,params:[]};routeString.split("&").forEach(function(pair){if(!pair)return;var parts=pair.split("="),name=parts[0],value=parts[1]||"";var wildcard=false;var param={key:name};if(value.charAt(0)==":"){param.name=value.substring(1)}else if(name=="*"&&value==""){wildcard=options.allowWildcards=true}else{param.value=value}if(!wildcard){options.params.push(param)}});return new QueryStringPattern(options)};return QueryStringPattern}();var PathPattern=function(){var pathParam=/:\w+/g,splatParam=/\*\w+/g,namedParams=/(:[^\/\.]+)|(\*\w+)/g,subPath=/\*/g,escapeRegExp=/[-[\]{}()+?.,\\^$|#\s]/g;function PathPattern(options){this.regexp=options.regexp;this.params=options.params;this.routeString=options.routeString}PathPattern.prototype.matches=function(pathname){return this.regexp.test(pathname)};PathPattern.prototype.match=function(pathname){var data={params:[],namedParams:{}};(this.regexp.exec(pathname)||[]).slice(1).forEach(function(value,idx){value=decodeURIComponent(value);data.namedParams[this.params[idx]]=value;data.params.push(value)},this);return data};PathPattern.routePathToRegexp=function(path){path=path.replace(escapeRegExp,"\\$&").replace(pathParam,"([^/]+)").replace(splatParam,"(.*)?").replace(subPath,".*?").replace(/\/?$/,"/?");return new RegExp("^/?"+path+"$")};PathPattern.fromString=function(routeString){routeString=routeString.split(/\?|#/)[0];var options={routeString:routeString,regexp:PathPattern.routePathToRegexp(routeString),params:(routeString.match(namedParams)||[]).map(function(param){return param.substring(1)})};return new PathPattern(options)};return PathPattern}();var RegexPattern=function(){function RegexPattern(regex){this.regex=regex}RegexPattern.prototype.matches=function(loc){return this.regex.test(loc)};RegexPattern.prototype.match=function(loc){var queryString=loc.search||loc.split("?")[0]||"";var queryParams=decodeQueryString(queryString);return{params:this.regex.exec(loc).slice(1),namedParams:{},queryParams:queryParams}};return RegexPattern}();var RoutePattern=function(){function RoutePattern(options){this.pathPattern=options.pathPattern;this.queryStringPattern=options.queryStringPattern;this.hashPattern=options.hashPattern;this.routeString=options.routeString}RoutePattern.prototype.matches=function(location){var loc=splitLocation(location);return(!this.pathPattern||this.pathPattern.matches(loc.path))&&(!this.queryStringPattern||this.queryStringPattern.matches(loc.queryString))&&(!this.hashPattern||this.hashPattern.matches(loc.hash))};RoutePattern.prototype.match=function(location){var loc=splitLocation(location),match,pattern;var data={params:[],namedParams:{},pathParams:{},queryParams:{},namedQueryParams:{},hashParams:{}};var addMatch=function(match){data.params=data.params.concat(match.params);data.namedParams=merge(data.namedParams,match.namedParams)};if(pattern=this.pathPattern){match=pattern.match(loc.path);if(match)addMatch(match);data.pathParams=match?match.namedParams:{}}if(pattern=this.queryStringPattern){match=pattern.match(loc.queryString);if(match)addMatch(match);data.queryParams=match?match.queryParams:{};data.namedQueryParams=match?match.namedQueryParams:{}}if(pattern=this.hashPattern){match=pattern.match(loc.hash);if(match)addMatch(match);data.hashParams=match?match.namedParams:{}}return data};RoutePattern.fromString=function(routeString){var parts=splitLocation(routeString);var matchPath=parts.path;var matchQueryString=parts.queryString||routeString.indexOf("?")>-1;var matchHash=parts.hash||routeString.indexOf("#")>-1;return new RoutePattern({pathPattern:matchPath&&PathPattern.fromString(parts.path),queryStringPattern:matchQueryString&&QueryStringPattern.fromString(parts.queryString),hashPattern:matchHash&&PathPattern.fromString(parts.hash),routeString:routeString})};return RoutePattern}();module.exports=RoutePattern;RoutePattern.QueryStringPattern=QueryStringPattern;RoutePattern.PathPattern=PathPattern;RoutePattern.RegexPattern=RegexPattern},{}]},{},[1])(1)});